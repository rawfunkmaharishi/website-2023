---
import { refinePalette } from "../../lib/tools";

import { data as lightPalette } from "../../conf/palettes/light";
import { data as darkPalette } from "../../conf/palettes/dark";

function rgbise(triple: Array<number>) {
  return "rgb(" + triple.join(", ") + ")";
}

export const colours = {
  light: refinePalette(lightPalette),
  dark: refinePalette(darkPalette),
};

var bloc = "";

for (var key in colours) {
  bloc += "@media (prefers-color-scheme: ";
  bloc += key;
  bloc += ") {\n";

  bloc += "  :root {\n";

  for (var subKey in colours[key]) {
    bloc += "    --colour-";
    bloc += subKey;
    bloc += ": ";
    bloc += rgbise(colours[key][subKey]);
    bloc += ";\n";
  }

  bloc += "  }\n";

  bloc += "}\n";
}
---

<style set:html={bloc}></style>

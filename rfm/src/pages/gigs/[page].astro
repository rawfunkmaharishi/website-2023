---
import { futureGigs } from "../../lib/tools";

import Layout from "../../layouts/Layout.astro";
import PaginatedLinks from "../../components/PaginatedLinks.astro";

export async function getStaticPaths({ paginate }) {
  const gigs = await futureGigs().then(function (items) {
    return items.map((gig) => {
      return {
        href: gig.url,
        date: gig.startDate,
        name: gig.location.name,
      };
    });
  });
  return paginate(gigs, { pageSize: 4 });
}

const { page } = Astro.props;
---

<Layout title="Upcoming Gigs">
    <PaginatedLinks page={page} dateFormat={"dddd MMM Do"} />
</Layout>

---
import Layout from "../layouts/Layout.astro";
import Slider from "../components/Slider.astro";

import { fetchFromAPI } from "../lib/tools";

const records = await fetchFromAPI("records").then(function (records) {
  return records.reverse().map((record) => {
    return {
      href: record.url,
      year: record.datePublished.split("-").slice(0, 1)[0],
      name: record.name,
      image: record.image.contentUrl,
    };
  });
});
---

<Layout title="Records">
  <Slider items={records} />
</Layout>

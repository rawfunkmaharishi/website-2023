---
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const response = await fetch("https://json.rawfunkmaharishi.uk/records.json");
  const data = await response.json();

  return data.map((record) => {
    return {
      params: {
        record: record["offSchema"]["id"],
      },
      props: { record },
    };
  });
}

const { record } = Astro.props;

const title = record.name;

// https://stackoverflow.com/a/7220510
// https://stackoverflow.com/a/53443378
const jsonLD = JSON.stringify((({ offSchema, ...o }) => o)(record), null, 2);
---

<Layout title={title} jsonLD={jsonLD}>
foo
</Layout>
